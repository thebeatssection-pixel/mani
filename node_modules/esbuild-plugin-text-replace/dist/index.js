var e=require("fs");function t(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}require("ts-replace-all");var n=/*#__PURE__*/t(e).promises,r=function(e,t){var n=e.slice();return t.forEach(function(e){n=n.replaceAll(e[0],e[1])}),n};module.exports=function(e){var t;void 0===e&&(e={include:/.*/,pattern:[]});var o=function(e){return"[object RegExp]"!==Object.prototype.toString.call(e.include)?(console.warn('Plugin "textReplace": Options.include must be a RegExp object, but gets an \''+typeof e.include+"' type. \nThis request will match ANY file!"),/.*/):e.include}(e),a=null==(t=e)?void 0:t.namespace;if(!Array.isArray(e.pattern))throw new Error('Plugin "textReplace": Options.pattern must be an Array!');if(0===e.pattern.length)throw new Error('Plugin "textReplace": Options.pattern must not be an empty Array!');return function(e,t,o,a){return{name:"textReplace",setup:function(a,u){var i,l,c=(void 0===u?{}:u).transform,s=void 0===c?null:c;if(s)return null==s||!s.contents||void 0!==t&&""!==t&&(null==s||null==(i=s.args)?void 0:i.namespace)!==t||void 0!==e&&!e.test(null==s||null==(l=s.args)?void 0:l.path)?{contents:s.contents}:{contents:r(s.contents,o)};a.onLoad({filter:e,namespace:t},function(e){var t=e.path;try{return Promise.resolve(n.readFile(t,"utf8")).then(function(e){return{contents:r(e,o)}})}catch(e){return Promise.reject(e)}})}}}(o,a,e.pattern)};
