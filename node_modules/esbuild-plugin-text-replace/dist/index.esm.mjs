import*as t from"fs";import"ts-replace-all";var e=t.promises,n=function(t,e){var n=t.slice();return e.forEach(function(t){n=n.replaceAll(t[0],t[1])}),n};function r(t){var r;void 0===t&&(t={include:/.*/,pattern:[]});var o=function(t){return"[object RegExp]"!==Object.prototype.toString.call(t.include)?(console.warn('Plugin "textReplace": Options.include must be a RegExp object, but gets an \''+typeof t.include+"' type. \nThis request will match ANY file!"),/.*/):t.include}(t),a=null==(r=t)?void 0:r.namespace;if(!Array.isArray(t.pattern))throw new Error('Plugin "textReplace": Options.pattern must be an Array!');if(0===t.pattern.length)throw new Error('Plugin "textReplace": Options.pattern must not be an empty Array!');return function(t,r,o,a){return{name:"textReplace",setup:function(a,l){var i,c,u=(void 0===l?{}:l).transform,s=void 0===u?null:u;if(s)return null==s||!s.contents||void 0!==r&&""!==r&&(null==s||null==(i=s.args)?void 0:i.namespace)!==r||void 0!==t&&!t.test(null==s||null==(c=s.args)?void 0:c.path)?{contents:s.contents}:{contents:n(s.contents,o)};a.onLoad({filter:t,namespace:r},function(t){var r=t.path;try{return Promise.resolve(e.readFile(r,"utf8")).then(function(t){return{contents:n(t,o)}})}catch(t){return Promise.reject(t)}})}}}(o,a,t.pattern)}export{r as default};
