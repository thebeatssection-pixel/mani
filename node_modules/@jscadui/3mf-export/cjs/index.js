var c=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var C=(t,e)=>{for(var a in e)c(t,a,{get:e[a],enumerable:!0})},D=(t,e,a,m)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of y(e))!T.call(t,s)&&s!==a&&c(t,s,{get:()=>e[s],enumerable:!(m=j(e,s))||m.enumerable});return t};var v=t=>D(c({},"__esModule",{value:!0}),t);var I={};C(I,{FileForRelThumbnail:()=>h,fileForContentTypes:()=>M,to3dmodel:()=>$,to3dmodelSimple:()=>k});module.exports=v(I);var p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var l=t=>{let e="";for(let a=0;a<16;a++)a%4!=3&&(a>0&&(e+=" "),e+=t[a]||0);return e};var f=(t=1,e=p)=>`    <item objectid="${t}" transform="${l(e)}" />
`;var d=t=>t?t.toISOString().substring(0,10):"";function u(t,{unit:e="millimeter",title:a="jscad model",author:m="",description:s="",application:o="jscad",creationDate:n=new Date,license:r="",modificationDate:i}={}){t.push(`<?xml version="1.0" encoding="UTF-8"?>
<model unit="${e}" xml:lang="en-US" xmlns="http://schemas.microsoft.com/3dmanufacturing/core/2015/02" xmlns:slic3rpe="http://schemas.slic3r.org/3mf/2017/06">
  <metadata name="slic3rpe:Version3mf">1</metadata>
  <metadata name="Title">${a}</metadata>
  <metadata name="Designer">${m}</metadata>
  <metadata name="Description">${s||a}</metadata>
  <metadata name="Copyright"></metadata>
  <metadata name="LicenseTerms">${r}</metadata>
  <metadata name="Rating"></metadata>
  <metadata name="CreationDate">${d(n)}</metadata>
  <metadata name="ModificationDate">${d(i||n)}</metadata>
  <metadata name="Application">${o}</metadata>
   `)}function x(t,e,a,m){t.push(`<object id="${e}" type="model"${m==null?"":' name="'+m+'"'}>
`),t.push(` <components>
`),a.forEach(({objectID:s,transform:o})=>{E(t,s,o)}),t.push(` </components>
`),t.push(`</object>
`)}var E=(t,e=1,a=p)=>{t.push(`    <component objectid="${e}" transform="${l(a)}" />
`)};function g(t,e,a,m,s,o){t.push(`  <object id="${e}" type="model"${o?' name="'+o+'"':""}>
   <mesh>
    <vertices>
`);for(let n=0;n<a.length;n+=3)t.push(`     <vertex x="${a[n].toPrecision(s)}" y="${a[n+1].toPrecision(s)}" z="${a[n+2].toPrecision(s)}" />
`);t.push(`    </vertices>
    <triangles>
`);for(let n=0;n<m.length;n+=3)t.push(`     <triangle v1="${m[n]}" v2="${m[n+1]}" v3="${m[n+2]}" />
`);return t.push(`    </triangles>
   </mesh>
  </object>
`),t}var M={name:"[Content_Types].xml",content:`<?xml version="1.0" encoding="UTF-8"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" />
<Default Extension="model" ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml" />
<Default Extension="png" ContentType="image/png" />
</Types>`};function $({meshes:t=[],components:e=[],items:a=[],precision:m=17,header:s}){let o=[];return u(o,s),o.push(`  <resources>
`),a.length==0&&console.error("3MF empty build! Include items or simple."),t.forEach(({id:n,vertices:r,indices:i,name:b})=>g(o,n,r,i,m,b)),e.forEach(({id:n,children:r,name:i})=>{x(o,n,r,i)}),o.push(`  </resources>
`),o.push(`<build>
`),a.forEach(({objectID:n,transform:r})=>{o.push(f(n,r))}),o.push(`</build>
`),o.push(`</model>
`),o.join("")}function k(t,e,a){let m=[];return t.forEach(({id:s,transform:o})=>{m.push({objectID:s,transform:o})}),$({meshes:t,items:m,header:e,precision:a})}var h=class{constructor(){this.idSeq=0,this.lines=['<?xml version="1.0" encoding="UTF-8"?>','<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">']}get name(){return"_rels/.rels"}addRel(e,a){this.lines.push(`  <Relationship Target="${e}" Id="rel-${++this.idSeq}" Type="${a}" />`)}add3dModel(e){this.addRel(e,"http://schemas.microsoft.com/3dmanufacturing/2013/01/3dmodel")}addThumbnail(e){this.addRel(e,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail")}get content(){return this.lines.join(`
`)+`
</Relationships>`}};
//# sourceMappingURL=index.js.map
