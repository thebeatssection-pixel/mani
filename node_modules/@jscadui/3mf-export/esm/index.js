var p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var l=t=>{let a="";for(let e=0;e<16;e++)e%4!=3&&(e>0&&(a+=" "),a+=t[e]||0);return a};var d=(t=1,a=p)=>`    <item objectid="${t}" transform="${l(a)}" />
`;var c=t=>t?t.toISOString().substring(0,10):"";function h(t,{unit:a="millimeter",title:e="jscad model",author:m="",description:s="",application:o="jscad",creationDate:n=new Date,license:r="",modificationDate:i}={}){t.push(`<?xml version="1.0" encoding="UTF-8"?>
<model unit="${a}" xml:lang="en-US" xmlns="http://schemas.microsoft.com/3dmanufacturing/core/2015/02" xmlns:slic3rpe="http://schemas.slic3r.org/3mf/2017/06">
  <metadata name="slic3rpe:Version3mf">1</metadata>
  <metadata name="Title">${e}</metadata>
  <metadata name="Designer">${m}</metadata>
  <metadata name="Description">${s||e}</metadata>
  <metadata name="Copyright"></metadata>
  <metadata name="LicenseTerms">${r}</metadata>
  <metadata name="Rating"></metadata>
  <metadata name="CreationDate">${c(n)}</metadata>
  <metadata name="ModificationDate">${c(i||n)}</metadata>
  <metadata name="Application">${o}</metadata>
   `)}function f(t,a,e,m){t.push(`<object id="${a}" type="model"${m==null?"":' name="'+m+'"'}>
`),t.push(` <components>
`),e.forEach(({objectID:s,transform:o})=>{$(t,s,o)}),t.push(` </components>
`),t.push(`</object>
`)}var $=(t,a=1,e=p)=>{t.push(`    <component objectid="${a}" transform="${l(e)}" />
`)};function u(t,a,e,m,s,o){t.push(`  <object id="${a}" type="model"${o?' name="'+o+'"':""}>
   <mesh>
    <vertices>
`);for(let n=0;n<e.length;n+=3)t.push(`     <vertex x="${e[n].toPrecision(s)}" y="${e[n+1].toPrecision(s)}" z="${e[n+2].toPrecision(s)}" />
`);t.push(`    </vertices>
    <triangles>
`);for(let n=0;n<m.length;n+=3)t.push(`     <triangle v1="${m[n]}" v2="${m[n+1]}" v3="${m[n+2]}" />
`);return t.push(`    </triangles>
   </mesh>
  </object>
`),t}var O={name:"[Content_Types].xml",content:`<?xml version="1.0" encoding="UTF-8"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" />
<Default Extension="model" ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml" />
<Default Extension="png" ContentType="image/png" />
</Types>`};function b({meshes:t=[],components:a=[],items:e=[],precision:m=17,header:s}){let o=[];return h(o,s),o.push(`  <resources>
`),e.length==0&&console.error("3MF empty build! Include items or simple."),t.forEach(({id:n,vertices:r,indices:i,name:g})=>u(o,n,r,i,m,g)),a.forEach(({id:n,children:r,name:i})=>{f(o,n,r,i)}),o.push(`  </resources>
`),o.push(`<build>
`),e.forEach(({objectID:n,transform:r})=>{o.push(d(n,r))}),o.push(`</build>
`),o.push(`</model>
`),o.join("")}function H(t,a,e){let m=[];return t.forEach(({id:s,transform:o})=>{m.push({objectID:s,transform:o})}),b({meshes:t,items:m,header:a,precision:e})}var x=class{constructor(){this.idSeq=0,this.lines=['<?xml version="1.0" encoding="UTF-8"?>','<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">']}get name(){return"_rels/.rels"}addRel(a,e){this.lines.push(`  <Relationship Target="${a}" Id="rel-${++this.idSeq}" Type="${e}" />`)}add3dModel(a){this.addRel(a,"http://schemas.microsoft.com/3dmanufacturing/2013/01/3dmodel")}addThumbnail(a){this.addRel(a,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail")}get content(){return this.lines.join(`
`)+`
</Relationships>`}};export{x as FileForRelThumbnail,O as fileForContentTypes,b as to3dmodel,H as to3dmodelSimple};
//# sourceMappingURL=index.js.map
